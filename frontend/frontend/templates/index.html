{% extends "base.html" %}

{% load extras %}

{% block title %}Porfolio{% endblock %}

{% block above_main %}
    <h1 class="main-header">Portfolio</h1>
{% endblock above_main %}

    {% block main %}
        {% for artist_SE in user.stocks %}
            <div class="portfolio-wrapper">
                <a href="{% url frontend.views.artist_single artist_SE.name|urlencode %}">
                    <div class="portfolio-img" style="background-image: url('{{ artist_SE.imgurls|get_image:'mega' }}');">
                        <div class="text-over-image bottom">
                            <span class="primary">{{ artist_SE.name|truncatechars:20 }}</span>
                            <br>
                            <span class="secondary">${{ artist_SE.price }}</span>
                        </div>
                    </div>
                </a>
                <div class="info-below-artist">
                    <p class="artist-points"><span>{{artist_SE.points}} points</span> per day</p>
                    <p class="artist-dividends"><span>${{artist_SE.dividend}}</span> per day</p>
                </div>
            </div>
        {% endfor %}
    {% endblock main %}

    {% block sidebar %}
        <h2 class="sidebar-red">Current wealth</h2>
        <p class="sidebar-price joined">${{user.money}}</p>
        <p class="bonus-wealth">(+ ${{user.portfolio_worth}} in your portfolio)</p>

        <p class="sidebar-price">{{user.points}} points</p>

        <hr>

        <h2 class="sidebar-red">Your Trophies</h2>
        {% if not user.trophies %}
            <p class="panel">You currently have no trophies.</p>
        {% endif %}
        <div class="trophies">
            <ul>
                {% for trophy in user.trophies %}
                    {% if forloop.counter > 5 %}
                        <li class="trophy hidden">
                    {% else %}
                        <li class="trophy">
                    {% endif %}
                            <i class="{{ trophy.icon|icon_split:'code' }}" style="color: {{ trophy.icon|icon_split:'colour' }};"></i>
                            <div class="description">
                                <h5 class="title">{{ trophy.name }}</h5>
                                <p>{{ trophy.description }}</p>
                            </div>
                        </li>
                {% endfor %}
            </ul>

            {% if user.trophies.length > 5 %}
                <a class="see-more-trophies" href="#">See all...</a>
            {% endif %}
        </div>
    {% endblock sidebar %}
